<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,user-scalable=0" />
    <title>商机监控_平台维度</title>
    <link type="text/css" href="/Css/style.css" rel="Stylesheet">
    <link type="text/css" href="/Css/swiper-3.4.0.min.css" rel="Stylesheet">
    <script type="text/javascript" src="/Scripts/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.animateNumber.min.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.jmpopups-0.5.1.pack.js"></script>
    <script type="text/javascript" src="/Scripts/echarts.js"></script>
    <script type="text/javascript" src="/Scripts/echarts_custom.js"></script>
    <script type="text/javascript" src="/Scripts/swiper-3.4.0.jquery.min.js"></script>
    <script type="text/javascript" src="/Scripts/商机监控/PT_PlotChart.js"></script>
    <script type="text/javascript">
        $(window).resize(function () {

        });
        $(document).ready(function () {
            //绑定弹出提示逻辑
            $('#divPopTitle').bind('click', function () {
                var content = 'Test';
                PopTitle(content);
            });
            
//            $('#spanLeadsCount').MagicNumber(165131);

//            //初始化幻灯片区域
//            var mySwiper = new Swiper('.swiper-container', {
//                // 如果需要分页器
//                pagination: '.swiper-pagination',
//                paginationClickable: true
//                //loop : true
//                //effect: 'flip'
//            });

//            //初始化中间li Click事件
//            $('div.swiper-container div.swiper-wrapper div.swiper-slide ul.ulitem li div.liItem').bind('click', function () {
//                $('div.swiper-container div.swiper-wrapper div.swiper-slide ul.ulitem li div.liItem').removeClass('selected');
//                $(this).addClass('selected');
//            });
        });
    </script>
</head>
<body>
    <div class="JYL_Title">
        <p>
            <span id="spanTitleDate"></span>&nbsp;<span style="font-size: 13px;" id="spanTitleWeek"></span>
        </p>
    </div>
    <div id="divsjjk_title" style="">
        <ul>
            <li class="selected" onclick="javascript:window.location='ptwd.htm';"><a>平台维度</a> </li>
            <li onclick="javascript:window.location='ywxwd.htm';"><a>业务线维度</a> </li>
        </ul>
    </div>
    <div class="moddleTop">
        <p>
            <span style="font-weight: bold;">平台Leads数构成</span>
        </p>
        <div id="divPopTitle">
            <img class="charthelper" src="/images/u361.png" />
        </div>
    </div>
    <!-- (饼图====开始) -->
    <div id="ChartPie1" class="layout" style="float: left; width: 100%; height: 250px;
        text-align: center;">
    </div>
    <!-- (饼图====结束) -->
    <div class="moddleTop">
        <p>
            <span>平台Leads数趋势和导向构成</span>
        </p>
        <!--<div>
            <img class="charthelper" src="/images/u361.png" />
        </div>-->
    </div>
    <div class="middleSub">
        <!--<img style='float: left; margin-left: 2px; margin-top: 3px;' src="/images/u787.png" />-->
        <p>
            <span>全网Leads总量为</span> <span style="color: #16B5E9;" id="spanLeadsCount">-</span> <span>，同比上一周</span>
            <span id='spanLeadsTotalWeekBasisMsg'></span> <span style="font-size: 16px;"  id="spanLeadsTotalWeekBasis">-</span> <span>，环比上一日</span>
            <span id='spanLeadsTotalDayBasisMsg'></span> <span style="font-size: 16px;" id="spanLeadsTotalDayBasis">-</span> <span>。</span>
        </p>
    </div>
    <div class="clear10">
    </div>
    <div id="divSlide" class="layout swiper-container" style="width: 100%; clear: both;">
        <!--<div class="swiper-wrapper">
            <div class="swiper-slide">
               <ul class="ulitem">
            <li>
                <div class="liItem selected">
                    <p class="title">
                        <span>易车网PC</span>
                    </p>
                    <p class="total">
                        <span style="font-size: 12px;">9999.99</span> <span style="font-size: 13px;">万</span>
                    </p>
                    <div class="percent">
                        <p>
                            <span class="tb up">29.99%</span> <span style="color: #afbee7; font-size: 12px;">同比</span>
                        </p>
                    </div>
                    <div style="margin-left: 50%; margin-top: 0px;">
                        <p>
                            <span class="tb down">59.99%</span> <span style="color: #afbee7; font-size: 12px;">环比</span>
                        </p>
                    </div>
                </div>
            </li>
            <li>
                <div class="liItem">
                    <p class="title">
                        <span>易车网WAP</span>
                    </p>
                    <p class="total">
                        <span style="font-size: 12px;">9999.99</span> <span style="font-size: 13px;">万</span>
                    </p>
                    <div class="percent">
                        <p>
                            <span class="tb up">29.99%</span> <span style="color: #afbee7; font-size: 12px;">同比</span>
                        </p>
                    </div>
                    <div style="margin-left: 50%; margin-top: 0px;">
                        <p>
                            <span class="tb down">59.99%</span> <span style="color: #afbee7; font-size: 12px;">环比</span>
                        </p>
                    </div>
                </div>
            </li>
            <li>
                <div class="liItem">
                    <p class="title">
                        <span>易车网APP</span>
                    </p>
                    <p class="total">
                        <span style="font-size: 12px;">9999.99</span> <span style="font-size: 13px;">万</span>
                    </p>
                    <div class="percent">
                        <p>
                            <span class="tb up">29.99%</span> <span style="color: #afbee7; font-size: 12px;">同比</span>
                        </p>
                    </div>
                    <div style="margin-left: 50%; margin-top: 0px;">
                        <p>
                            <span class="tb down">59.99%</span> <span style="color: #afbee7; font-size: 12px;">环比</span>
                        </p>
                    </div>
                </div>
            </li>
            <li>
                <div class="liItem">
                    <p class="title">
                        <span>报价APP</span>
                    </p>
                    <p class="total">
                        <span style="font-size: 12px;">9999.99</span> <span style="font-size: 13px;">万</span>
                    </p>
                    <div class="percent">
                        <p>
                            <span class="tb up">29.99%</span> <span style="color: #afbee7; font-size: 12px;">同比</span>
                        </p>
                    </div>
                    <div style="margin-left: 50%; margin-top: 0px;">
                        <p>
                            <span class="tb down">59.99%</span> <span style="color: #afbee7; font-size: 12px;">环比</span>
                        </p>
                    </div>
                </div>
            </li>
        </ul>
            </div>
            <div class="swiper-slide">
               <ul class="ulitem">
            <li>
                <div class="liItem">
                    <p class="title">
                        <span>二手车</span>
                    </p>
                    <p class="total">
                        <span style="font-size: 12px;">9999.99</span> <span style="font-size: 13px;">万</span>
                    </p>
                    <div class="percent">
                        <p>
                            <span class="tb up">29.99%</span> <span style="color: #afbee7; font-size: 12px;">同比</span>
                        </p>
                    </div>
                    <div style="margin-left: 50%; margin-top: 0px;">
                        <p>
                            <span class="tb down">59.99%</span> <span style="color: #afbee7; font-size: 12px;">环比</span>
                        </p>
                    </div>
                </div>
            </li>
            <li>
                <div class="liItem">
                    <p class="title">
                        <span>惠买车</span>
                    </p>
                    <p class="total">
                        <span style="font-size: 12px;">9999.99</span> <span style="font-size: 13px;">万</span>
                    </p>
                    <div class="percent">
                        <p>
                            <span class="tb up">29.99%</span> <span style="color: #afbee7; font-size: 12px;">同比</span>
                        </p>
                    </div>
                    <div style="margin-left: 50%; margin-top: 0px;">
                        <p>
                            <span class="tb down">59.99%</span> <span style="color: #afbee7; font-size: 12px;">环比</span>
                        </p>
                    </div>
                </div>
            </li>
        </ul>
            </div>
        </div>-->
    </div>
    <div class="swiper-pagination yiche">
    </div>
    <!--<div class="" style="clear: both; display: block; text-align: center;">
                <img src="/images/u822.png" style="margin-top: 0px; margin-left: 2px; margin-right: 2px;" />
                <img src="/images/u868.png" style="margin-top: 0px; margin-left: 2px; margin-right: 2px;" />
        </div>-->
    <div class="clear10">
        </div>
        <div class="fenge">
            <img src="/images/u767.png">
        </div>
        <div class="layout hx" style="margin-top: -1px;">
        </div>

    <!-- (中间内容====结束) -->
    <div class="charttitle2">
        <p>
            <span id="spanPT_Chart2Title">-</span><span> Leads导向构成</span>
        </p>
    </div>
    <!-- (柱状图====开始) -->
    <div class="layout" id="ChartPie2" style="width: 100%; height: 250px;">
    </div>
    <!-- (柱状图====结束) -->
    <!-- (柱状图====开始) -->
    <div class="charttitle2" style="margin-bottom: -2px;">
        <p>
            <span id="spanPT_Chart3Title">-</span><span> Leads数趋势</span>
        </p>
    </div>
    <div class="layout" id="main_line" style="width: 100%; height: 250px;">
    </div>
    <!-- (柱状图====结束) -->
    <div class="clear20">
    </div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart1 = echarts.init(document.getElementById('ChartPie1'));
        myChart1.showLoading();
        //获取饼图数据源
        AppReport.SJJK_PT.GetLeads_SeriesData(function (json, titleDate) {
            //初始化页面标题日期内容
            if (titleDate && titleDate.dataDate && titleDate.dataWeek) {
                $('#spanTitleDate').text(titleDate.dataDate);
                $('#spanTitleWeek').text(titleDate.dataWeek);

                //绘制饼图
                AppReport.SJJK_PT.InitPieChart('ChartPie1', json);
                //绑定 商机监控-平台维度 明细（以平台维度展示）
                AppReport.SJJK_PT.GetLeads_DetailData(titleDate.dataDate, function (json) {
                    
                    if (json.summary) {
                        $('#spanLeadsCount').MagicNumber(json.summary.totalCount);
                        if (json.summary.lastWeek) {
                            if (json.summary.lastWeek >= 0) {
                                $('#spanLeadsTotalWeekBasis').css('color', '#FC625C').text(json.summary.lastWeek.toPercent());
                                $('#spanLeadsTotalWeekBasisMsg').text('增长');
                            }
                            else {
                                $('#spanLeadsTotalWeekBasis').css('color', '#19ECE5').text(json.summary.lastWeek.toPercent());
                                $('#spanLeadsTotalWeekBasisMsg').text('减少');
                            }
                        }
                        if (json.summary.yesterday) {
                            if (json.summary.yesterday >= 0) {
                                $('#spanLeadsTotalDayBasis').css('color', '#FC625C').text(json.summary.yesterday.toPercent());
                                $('#spanLeadsTotalDayBasisMsg').text('增长');
                            }
                            else {
                                $('#spanLeadsTotalDayBasis').css('color', '#19ECE5').text(json.summary.yesterday.toPercent());
                                $('#spanLeadsTotalDayBasisMsg').text('减少');
                            }
                        }
                    }

                    if (json.data && json.data.length > 0 && json.data[0].siteId) {
                        //绑定某个日期内的，商机监控-平台维度 明细数据
                        AppReport.SJJK_PT.BindLeadsDetailData(json.data);
                    }
                });
            }
        });
    </script>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart3 = echarts.init(document.getElementById('main_line'));
        var option = {
            //backgroundColor: 'rgba(73, 71, 84, 1)',
            tooltip: {
                trigger: 'axis', //item 数据项图形触发，主要在散点图，饼图等无类目轴的图表中使用,axis 坐标轴触发，主要在柱状图，折线图等会使用类目轴的图表中使用。
                triggerOn: 'click', //默认鼠标移动时触发，如果设置click则鼠标点击时触发
                //formatter: 折线（区域）图、柱状（条形）图、K线图 : {a}（系列名称），{b}（类目值），{c}（数值）, {d}（无）
                backgroundColor: 'rgba(0, 0, 0, 0.847058823529412)'//提示框背景颜色

                //formatter: '{b}<br/>{a0}: {c0}元<br />{a1}：{c1}元<br />{a2}：{c2}元<br />{a3}：{c3}元'
            },
            legend: {
                data: [{ name: 'Leads数', icon: 'circle' }, { name: '下单用户数', icon: 'circle'}],
                top: 12,
                right: '6%',
                textStyle: {
                    color: '#7781a5',
                    fontFamily: '微软雅黑',
                    fontWeight: '400',
                    fontStyle: 'normal',
                    fontSize: 14
                },
                itemGap: 25,
                itemWidth: 12,
                itemHeight: 12
            },
            dataZoom: [{
                type: 'inside',
                startValue: 5,
                endValue: 10,
                xAxisIndex: 0
            }],
            grid: {
                left: '13%',
                right: '5%',
                bottom: '23%',
                top: 42,
                //width:314,
                containLabel: false,
                show: false

            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['09-12', '09-14', '09-16', '09-18', '09-20', '09-22', '09-24', '09-25', '09-26', '09-27', '09-28', '09-30', '10-01', '10-02', '10-03', '10-04', '10-05', '10-06', '10-07', '10-08', '10-09', '10-10', '10-11', '10-12', '10-13', '10-14', '10-15', '10-16', '10-17', '10-18', '10-19', '10-20', '10-21', '10-22', '10-23', '10-24', '10-25', '10-26', '10-27', '10-28', '10-29', '10-30', '10-31', '11-01', '11-02', '11-03', '11-04', '11-05', '11-06', '11-07', '11-08', '11-09', '11-10', '11-11', '11-12', '11-13', '11-14', '11-15', '11-16', '11-17', '11-18', '11-19', '11-20', '11-21', '11-22', '11-23', '11-24', '11-25'],
                axisLine: {
                    show: true,
                    lineStyle: {
                        color: '#272d45',
                        width: 2
                    },
                    onZero: true
                },
                axisTick: {
                    show: false
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#36425c',
                        fontFamily: '微软雅黑',
                        fontWeight: '400',
                        fontStyle: 'normal',
                        fontSize: 12
                    },
                    rotate: 45,
                    margin: 10
                }
            },
            yAxis: {
                name: '单位/万',
                //nameLocation: 'start',
                nameTextStyle: {
                    color: '#363f5c',
                    fontStyle: 'normal',
                    fontWeight: 'normal',
                    fontFamily: '微软雅黑',
                    fontSize: 14
                },
                nameGap: 10,
                type: 'value',
                axisLine: {
                    show: true,
                    lineStyle: {
                        color: '#272d45',
                        width: 2
                    }
                },
                axisTick: {
                    show: false

                },
                //boundaryGap: ['20%', '20%'],
                splitLine: {
                    show: true,
                    lineStyle: {
                        type: 'solid',
                        color: '#282a43',
                        width: 1
                    }
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#363f5c',
                        fontFamily: '微软雅黑',
                        fontWeight: '400',
                        fontStyle: 'normal',
                        fontSize: 12
                    },
                    margin: 10
                }
                //splitNumber: 5,y轴刻度分几段默认是5段。
            },
            series: [{
                name: 'Leads数',
                type: 'line',
                //stack: '总量',
                //symbol: 'circle', //数据点形状
                //symbolSize: 12, //图形大小
                showSymbol: false,
                areaStyle: { normal: { color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                    offset: 0, color: 'RGB(22,237,229)' // 0% 处的颜色
                    //offset: 0, color: 'rgba(255,0,0,1)'
                }, {
                    offset: 1, color: 'RGB(27,29,50)' // 100% 处的颜色
                    //offset: 1, color: 'rgba(255,0,0,0.5)'
                }], false)
                }
                },
                //areaStyle: { normal: { borderWidth: 0} },
                itemStyle: {
                    normal: {
                        color: 'RGB(22,237,229)'
                    }
                },
                lineStyle: {
                    normal: {
                        color: 'RGB(22,237,229)',
                        width: '2',
                        type: 'solid'
                    }
                },


                data: [890, 910, 892, 925, 852, 840, 776, 865, 938, 704, 832, 819, 619, 658, 918, 694, 699, 677, 398, 830, 657, 660, 690, 638, 680, 651, 756, 640, 600, 938, 671, 610, 694, 951, 786, 623, 662, 621, 630, 704, 690, 547, 961, 554, 630, 653, 648, 559, 844, 639, 927, 607, 623, 634, 685, 629, 619, 654, 644, 500, 583, 636, 565, 545, 633, 621, 624, 567, 672, 895, 632, 677, 647, 694, 439]
            }, {
                name: '下单用户数',
                type: 'line',
                //stack: '总量',
                //symbol: 'circle',
                //symbolSize: 12,
                showSymbol: false,
                //areaStyle: { normal: { borderWidth: 0} },
                areaStyle: { normal: { color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                    offset: 0, color: 'RGB(56,111,212)' // 0% 处的颜色
                }, {
                    offset: 1, color: 'RGB(27,29,50)' // 100% 处的颜色
                }], false)
                }
                },
                itemStyle: {
                    normal: {
                        //color: '#FFD700'//图形颜色此次也设定了legend图形颜色
                        color: 'RGB(56,111,212)'
                    }
                },
                lineStyle: {
                    normal: {
                        color: 'RGB(56,111,212)',
                        width: '2',
                        type: 'solid'
                    }
                },
                data: [367, 381, 333, 275, 242, 200, 255, 214, 119, 391, 288, 232, 158, 288, 253, 227, 251, 297, 226, 269, 281, 201, 247, 186, 221, 229, 226, 226, 203, 229, 205, 281, 208, 282, 294, 234, 263, 174, 254, 204, 267, 181, 250, 275, 247, 276, 284, 287, 237, 256, 228, 285, 229, 212, 274, 226, 224, 217, 354, 283, 274, 388, 210, 119, 285, 207, 224, 275, 294, 218, 163, 277, 243, 122, 202]
            }]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart3.setOption(option);
    </script>
</body>
</html>
