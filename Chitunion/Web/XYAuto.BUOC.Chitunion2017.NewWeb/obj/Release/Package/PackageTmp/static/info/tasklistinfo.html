<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    <title>媒体变现-赤兔联盟</title>
    <link rel="stylesheet" type="text/css" href="/css/movie_adverts.css" />
    <script type="text/javascript" src="/js/jquery.1.11.3.min.js"></script>
    <script src="js/PagePading.js"></script>
    <!--<script language="javascript" src="/api/check.ashx?NotCheckModule=true&NotRedirectURL=true" type="text/javascript"></script>
    <script type="text/javascript" src="/js/ejs.min.js"></script>
    <script type="text/javascript" src="/js/Common_chitu.js"></script>
    <script type="text/javascript" src="/js/common.js"></script>
    <script type="text/javascript" src="/js/jquery.browser.js"></script>
    <script type="text/javascript" src="/js/laydate.js"></script>
    <script type="text/javascript" src="/js/layer/layer.js"></script>
    <script type="text/javascript" src="/js/jquery.uploadify.v3.2.min.js"></script>
    <script type="text/javascript" src="/js/jquery.jmpopups-0.5.1.pack.js"></script>
    <script type="text/javascript" src="/js/jquery.pagination.js"></script>
    <script type="text/javascript" src="/js/clipboard.min.js"></script>
    <script type="text/javascript" src="js/contentDistributionList.js"></script>-->

    <script type="text/javascript">
        function GetTaskInfoList(pageIndex, pageSize) {
            $("#TaskList").html("");
            $.get("http://172.20.17.6:8099/api/MediaMatching/GetTaskListInfo", { PageIndex: pageIndex, PageSize: pageSize }, function (data) {

                if (data != null) {

                    $(data.Result.List).each(function (index, item) {

                        $("#TaskList").append("<tr><td>" + item.TaskName + "</td><td>" + item.MaterialUrl + "</td><td>" + item.ImgUrl + "</td><td>" + item.Synopsis + "</td><tr>")
                    });
                    if (pageIndex==1) {
                        $("#ucPager").NewPage({
                            pageDIV: "#ucPager",
                            TotalPages: (data.Result.TotalCount % 20) % 20 > 0 ? (parseInt(data.Result.TotalCount / 20) + 1) : (data.Result.TotalCount / 20),
                            TotalRecords: data.Result.TotalCount,
                            PageSize: pageSize,
                            handlefun: "GetTaskInfoList",
                            argument: ""
                        });
                    }
                }
            }, "json");
        }
        $(function () {
            GetTaskInfoList(1,20);
        })
    </script>
</head>
<body>
    <div class="content" style="margin-top: -20px;">

        <div class="clear"></div>
        <table class="tablelist " border="0" cellspacing="0" cellpadding="0">
            <tr class="tittrbg">
                
                <td>任务名称</td>
                <td>物料链接</td>
                <td>头图地址</td>
                <td>简介</td>
            </tr>
            <tbody id="TaskList"></tbody>

        </table>
        <div class="page pad0">
            <div id="ucPager" class="pagebox clearfix">
            </div>
        </div>
    </div>
</body>
</html>

