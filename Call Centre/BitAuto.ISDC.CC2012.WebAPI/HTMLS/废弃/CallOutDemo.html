<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script src="../Scripts/HighChart/jquery1.8.3.min.js" type="text/javascript"></script>
    <script src="../Scripts/HighChart/highcharts.js"></script>
    <script src="../Scripts/jquery.jmpopups-0.5.1.pack.js" type="text/javascript"></script>
    <script type="text/javascript">

        var pin1_1 = {

        }

        pin1_1.chartOption = {
            chart: { type: "line" },
            legend: {
                floating: true,
                //layout: 'vertical',
                align: 'right',
                itemMarginTop: 25,
                verticalAlign: "top",
                borderWidth: 0
            },
            plotOptions: {
                column: {
                    dataLabels: {
                        enabled: false
                    }
                }
            },
            title: { text: "呼出业务接通情况实时监控", x: -20 },
            subtitle: { text: "(智能平台运营支持部)", x: -20 },
            xAxis: {
                labels: { style: { fontWeight: "bolder"} },
                categories: ["9:30", "10:00", "10:30", "11:00", "11:30", "12:00", "12:30", "13:00", "13:30", "14:00", "14:30", "15:00", "15:30", "16:00", "16:30", "17:00", "17:30", "18:00"]
            },
            yAxis: {
                title: { text: "" },
                maxPadding: 0.1,
                minPadding: 0.1
            },
            credits: { enabled: false }
        };

        $(function () {
            $('#btnBC').click(function () {
                //setInterval(pin1_1.GetChart, 5000);
                pin1_1.GetChart();
                //login();
            });
            // $('#jmpopClose').live('click', function() { $.closePopupLayer('AssignTaskAjaxPopupForSelect', false); });
        });

        function login() {

            $.openPopupLayer({
                name: "AssignTaskAjaxPopupForSelect",
                url: "/Partial/Login",
                beforeClose: function (e) {

                }
            });

        }

        pin1_1.GetChart = function () {
            $.ajax({
                //url: "/api/APIDemo/GetBusinessConnect",
                url: "/api/APICCMonitor/GetBigScreenReport2_3",
                success: function (data) {
                    data = $.parseJSON(data);
                    if (data.ErrorNumber == 0) {
                        pin1_1.chartOption.series = data.data;
                        $('#containerBC').highcharts(pin1_1.chartOption);
                    } else {
                        alert(data.ErrorMsg);
                    }
                },
                error: function (msg) { console.log(msg); }
            });
        };

    </script>
    <script type="text/javascript">

        var pin1_2 = {

        }

        pin1_2.chartOption = {
            chart: {
                type: "column"
            },
            legend: { enabled: false },
            plotOptions: {
                column: {
                    dataLabels: {
                        enabled: true,
                        style: {
                            fontWeight: 'bold'
                        }
                    }
                }
            },
            title: { text: "呼出业务队列实时监控" },
            subtitle: { text: "(智能平台运营支持部)" },
            xAxis: {
                labels: { style: { fontWeight: "bolder"} },
                categories: ["Call", "Free", "Busy", "Online SCR"]
            },
            yAxis: {
                title: { text: "" },
                maxPadding: 0.1,
                minPadding: 0.1
            },
            credits: { enabled: false }
        };

        $(function () {
            $('#btnBQ').click(function () {
                //setInterval(pin1_2.GetChart, 5000);
                pin1_2.GetChart();
            });
        });



        pin1_2.GetChart = function () {
            $.ajax({
                url: "/api/APIDemo/GetBusinessQueue",
                //type: "GetCallOut",
                success: function (data) {
                    data = $.parseJSON(data);
                    if (data.ErrorNumber == 0) {
                        pin1_2.chartOption.series = data.data;
                        $('#containerBQ').highcharts(pin1_2.chartOption);
                    } else {
                        alert(data.ErrorMsg);
                    }
                },
                error: function (msg) { console.log(msg); }
            });
        };

    </script>
</head>
<body>
    <h3>
        呼出业务接通情况实时监控</h3>
    <button type="button" id="btnBC">
        接通实时监控</button>
    <div id="containerBC" style="height: 400px;">
    </div>
    <h3>
        呼出队列实时监控</h3>
    <h4>
        获取CallOut实时报表</h4>
    <button type="button" id="btnBQ">
        队列实时监控</button>
    <div id="containerBQ" style="height: 400px;">
    </div>
</body>
</html>
